<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="description" content="CIS 114 HW 8">
    <meta name="Author" content="Michael Kmak">
    <title>Homework 8 - AJAX Application</title>

    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="sidebar">
        <h2>Navigation</h2>
        <ul>
            <li><a href="/index.html">Home</a></li>
            <li><a href="/hw2.html">Homework 2</a></li>
            <li><a href="/hw3.html">Homework 3</a></li>
            <li><a href="/hw4.html">Homework 4</a></li>
            <li><a href="/hw5.html">Homework 5</a></li>
            <li><a href="/hw6.html">Homework 6</a></li>
            <li><a href="/hw7.html">Homework 7</a></li>
            <li>&emsp;&rarr;&nbsp;<a href="/hw8.html">Homework 8</a></li>
        </ul>
    </div>
    <div id="content">
        <h1>Homework 8</h1>
        <button type="button" onclick="loadDoc()">Get CD collection</button>
        <br><br>
        <table id="demo"></table>
        
        <script>
        function loadDoc() {
            const xhttp = new XMLHttpRequest();
            xhttp.onload = function() {
                myFunction(this);
            }
            xhttp.open("GET", "hw8/cd_catalog.xml");
            xhttp.send();
        }
        function myFunction(xml) {
            const xmlDoc = xml.responseXML;
            const x = xmlDoc.getElementsByTagName("CD");
            let table="<tr><th>Artist</th><th>Title</th></tr>";
            for (let i = 0; i <x.length; i++) { 
                table += "<tr><td>" +
                x[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue +
                "</td><td>" +
                x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue +
                "</td></tr>";
            }
            document.getElementById("demo").innerHTML = table;
        }
        </script>
        <h2>Explanation of Ajax</h2>
        <p>
            Ajax allows a webpage to dynamically update its content without refreshing the entire
            page. </thead>The <code>XMLHttpRequest</code> class is core to this process, 
            defining a request to an internal or external web server. This request (ideally) will
            load XML data from the file <code>hw8/cd_catalog.xml</code> and send it. The request is 
            created with the <code>opne()</code> function and sent with <code>send()</code>.
            <code>send()</code> will return immediately without waiting for the result of the GET request.
            The data received will instead be processed by the <code>onload</code> function defined
            earlier. <code>myFunction()</code> will be passed the result of the request and pulls a set
            of tags from the XML document. These tags are processed and added to the DOM.
        </p>
        <h2>REST API</h2>
        <p>they're all bad just do your work offline</p>
        <br /><h3><a href="/index.html">Back to Home</a></h3>
    </div>
</body>
</html>